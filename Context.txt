ğŸ¬ PROJE BAÄLAMI: Ultra Cinema Platform (Full Stack)

Proje Sahibi: Furkan GÃ¼nbaz & Enes Cabbar AkÃ§a
AmaÃ§: Ãœniversite VeritabanÄ± YÃ¶netim Sistemleri dersi iÃ§in geliÅŸtirilmiÅŸ, CV niteliÄŸinde profesyonel sinema bilet rezervasyon ve yÃ¶netim sistemi.
GitHub: https://github.com/gunbaz/ultra-cinema-platform

ğŸ› ï¸ 1. Teknoloji YÄ±ÄŸÄ±nÄ± (Tech Stack)

Frontend: React.js (Vite), Tailwind CSS, React Router DOM, Axios.

Backend: Node.js, Express.js.

VeritabanÄ±: PostgreSQL (Relational DB).

GÃ¼venlik: JWT (JSON Web Token), Bcrypt (Åifreleme).

VeritabanÄ± YÃ¶netimi: pg (node-postgres) kÃ¼tÃ¼phanesi, DBeaver (GUI).

ğŸ—„ï¸ 2. VeritabanÄ± Mimarisi (Database Schema)

VeritabanÄ± 3. Normal Form (3NF) kurallarÄ±na gÃ¶re tasarlanmÄ±ÅŸ CinemaDB isimli veritabanÄ±dÄ±r.

Tablolar ve Ä°liÅŸkiler:

Roles: KullanÄ±cÄ± yetkileri (ID: 1 -> MÃ¼ÅŸteri, ID: 2 -> Super Admin).

Users: KullanÄ±cÄ± bilgileri. role_id ile Roles tablosuna baÄŸlÄ±. Åifreler password_hash olarak tutulur.

Movies: Film detaylarÄ± (title, description, duration_minutes, poster_url, imdb_rating, release_date). release_date zorunludur.

Cities, Cinemas, Halls: Lokasyon ve salon hiyerarÅŸisi.

Seats: Salonun koltuk haritasÄ± (row_label, seat_number).

Sessions: Hangi filmin, hangi salonda, ne zaman oynadÄ±ÄŸÄ±.

Tickets: SatÄ±lan biletler. user_id, session_id ve seat_id ile iliÅŸkilidir.

ğŸ”Œ 3. Backend Mimarisi (API Endpoints)

TÃ¼m backend mantÄ±ÄŸÄ± tek bir backend/server.js dosyasÄ±nda toplanmÄ±ÅŸtÄ±r (Monolithic yapÄ±).

MÃ¼ÅŸteri RotalarÄ± (Public):

GET /api/movies: Vizyondaki tÃ¼m filmleri listeler (Tarihe gÃ¶re sÄ±ralÄ±).

GET /api/movies/:id: Tek bir filmin detayÄ±nÄ± getirir.

GET /api/seats/:movieId: O filme ait DOLU (SatÄ±lmÄ±ÅŸ) koltuklarÄ± getirir (Ã–rn: ['A1', 'B2']).

POST /api/tickets: Bilet satÄ±n alma iÅŸlemi.

Ä°ÅŸleyiÅŸ: SeÃ§ilen koltuklarÄ± dÃ¶ngÃ¼ye alÄ±r, Ã¶nce seat_id ve session_id bulunur, sonra Tickets tablosuna INSERT yapÄ±lÄ±r.

YÃ¶netici RotalarÄ± (Protected - JWT Required):

POST /api/admin/login: Admin giriÅŸi.

Ä°ÅŸleyiÅŸ: E-posta ile kullanÄ±cÄ±yÄ± bulur (Roles tablosu ile JOIN yaparak), Bcrypt ile ÅŸifreyi doÄŸrular, 1 saatlik JWT Token dÃ¶ner.

GET /api/admin/stats: Dashboard verileri (Toplam HasÄ±lat, SatÄ±lan Bilet, Film SayÄ±sÄ±).

POST /api/admin/movies: Yeni film ekleme.

Not: release_date veritabanÄ±nda zorunlu olduÄŸu iÃ§in backend otomatik olarak NOW() basar.

DELETE /api/admin/movies/:id: Film silme.

Middleware:

authenticateToken: Gelen istekte "Bearer Token" olup olmadÄ±ÄŸÄ±nÄ± ve geÃ§erliliÄŸini kontrol eder. GeÃ§ersizse 401/403 dÃ¶ner.

ğŸ¨ 4. Frontend Mimarisi (React)

TasarÄ±m dili: Netflix-Style (Koyu Tema, KÄ±rmÄ±zÄ± Aksentler).

Sayfalar (src/pages):

Home.jsx (Ana Sayfa):

Filmleri Grid yapÄ±sÄ±nda listeler.

Poster, IMDB puanÄ± ve "Bilet Al" butonu iÃ§erir.

Reservation.jsx (Koltuk SeÃ§imi):

URL'den film ID'sini alÄ±r.

Backend'den dolu koltuklarÄ± Ã§eker ve KÄ±rmÄ±zÄ± yapar.

KullanÄ±cÄ± boÅŸ koltuklarÄ± seÃ§ip (YeÅŸil), Ã¶deme yapabilir.

Login.jsx (Admin GiriÅŸi):

E-posta ve Åifre formu. BaÅŸarÄ±lÄ± giriÅŸte Token'Ä± localStorage'a kaydeder.

Admin.jsx (YÃ¶netim Paneli):

Dashboard: Ä°statistik kartlarÄ±nÄ± gÃ¶sterir.

Film Ekle: Form Ã¼zerinden veritabanÄ±na film ekler.

Film Listesi: Mevcut filmleri listeler ve silme imkanÄ± tanÄ±r.

GÃ¼venlik: Token yoksa kullanÄ±cÄ±yÄ± otomatik /login sayfasÄ±na atar.

ğŸ› 5. Ã‡Ã¶zÃ¼len Kritik Sorunlar (GeÃ§miÅŸ)

Admin GiriÅŸ HatasÄ± (400/500):

Sorun: Backend, token oluÅŸtururken user.role verisine eriÅŸemiyordu Ã§Ã¼nkÃ¼ SQL sorgusu Roles tablosunu JOIN etmiyordu.

Ã‡Ã¶zÃ¼m: Login SQL sorgusu JOIN Roles iÃ§erecek ÅŸekilde gÃ¼ncellendi.

HatalÄ± Åifre (Hash):

Sorun: VeritabanÄ±na manuel eklenen admin ÅŸifresi, bcrypt formatÄ±nda deÄŸildi.

Ã‡Ã¶zÃ¼m: GeÃ§ici bir rota (/api/tools/create-admin) ile ÅŸifre (123456) kod tarafÄ±nda hashlenerek veritabanÄ± gÃ¼ncellendi.

Film Eklerken 500 HatasÄ±:

Sorun: VeritabanÄ±ndaki release_date (Not Null) alanÄ±, formdan gÃ¶nderilmediÄŸi iÃ§in hata veriyordu.

Ã‡Ã¶zÃ¼m: Backend koduna INSERT iÅŸleminde otomatik NOW() eklendi.

KoltuklarÄ±n Kaydedilmemesi:

Sorun: user_id alanÄ± boÅŸ gidiyordu (Hayalet MÃ¼ÅŸteri).

Ã‡Ã¶zÃ¼m: VeritabanÄ±na ID'si 1 olan varsayÄ±lan bir mÃ¼ÅŸteri eklendi ve Backend bu ID'yi kullanmaya ayarlandÄ±.

ğŸš€ 6. Mevcut Durum

Proje ÅŸu an Localhost Ã¼zerinde tam fonksiyonel olarak Ã§alÄ±ÅŸmaktadÄ±r.

Admin: admin@ultra.com / 123456

MÃ¼ÅŸteri: ArayÃ¼z Ã¼zerinden bilet alabilir, koltuk durumlarÄ± anlÄ±k gÃ¼ncellenir.

Veri: Filmler, koltuklar ve satÄ±ÅŸlar PostgreSQL veritabanÄ±nda kalÄ±cÄ±dÄ±r.